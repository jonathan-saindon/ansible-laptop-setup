---
- name: Add Atom repository (Webupd8team)
  apt_repository: repo="ppa:webupd8team/atom" state=present

- name: Install Atom text editor
  apt: name=atom state=present update_cache=yes

- template:
    src: "{{ atom.config.src }}{{ atom.config.filename }}"
    dest: "{{ atom.config.dest }}{{ atom.config.filename }}"
    owner: "{{ user.name }}"
    group: "{{ user.name }}"
    mode: 0664

- name: Install Atom packages
  become: yes
  command: "sudo apm install --packages-file {{ atom.packages.path }}"
